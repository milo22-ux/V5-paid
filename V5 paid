local SoundService = game:GetService("SoundService")

local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://131644923"
sound.Parent = SoundService
sound.Volume = 1
sound.Looped = false

sound:Play()

local StarterGui = game:GetService("StarterGui")

pcall(function()
    StarterGui:SetCore("SendNotification", {
        Title = "üîë Whitelisted.",
        Text = "Hello Friend. You have been whitelisted.",
        Duration = 7
    })
end)

loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/Linoria-modded-/refs/heads/main/LinoriaModded.lua", true))()

local Window = Library:CreateWindow({
    Title = 'Vercore.xyz paid',
    Center = true,
    AutoShow = true,
    TabPadding = 8,
    MenuFadeTime = 0.2
})

local Tabs = {
    Combat = Window:AddTab('‚öîÔ∏è Combat'),
    Visuals = Window:AddTab('üëÄ Visuals'),
    World = Window:AddTab('üåç World'),
    Random = Window:AddTab('‚ùì Random'),
}

local CombatLeft = Tabs.Combat:AddLeftGroupbox("Combat Left")
local CombatRight = Tabs.Combat:AddRightGroupbox("Combat Right")

CombatLeft:AddButton("Hitbox", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/Trident-survival-stuff/refs/heads/main/V5%20hitbox", true))()
end)

CombatLeft:AddToggle("NoSpread", {
    Text = "No Spread",
    Default = false,
    Callback = function(state)
        if state then
            no_spread = hookmetamethod(Random.new(), "__namecall", newcclosure(function(self, ...)
                local method = getnamecallmethod()
                if method=="NextInteger" and debug.info(3,"l")==283 and debug.info(3,"s"):find("RangedWeaponClient") or
                   method=="NextInteger" and debug.info(3,"l")==152 and debug.info(3,"s"):find("BowClient") then
                    if getstack(3,12)==-100 and getstack(3,13)==100 then
                        setstack(3,12,0)
                        setstack(3,13,0)
                    end
                end
                return no_spread(self,...)
            end))
        else
            no_spread = nil
        end
    end
})

CombatLeft:AddToggle("NoRecoil", {
    Text = "No Recoil",
    Default = false,
    Callback = function(state)
        if state then
            no_recoil = hookfunction(CFrame.new, newcclosure(function(...)
                if debug.info(3,"l")==389 and debug.info(3,"s"):find("Camera") then
                    setstack(3,1,{cameraXShake=0,rotSpeed=0,rotMag=0,returnTime=0,push=0,returnLerp=0,cameraY=0,cameraX=0,lerp=0})
                end
                return no_recoil(...)
            end))
        else
            no_recoil = nil
        end
    end
})

CombatRight:AddButton("No Cooldown", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/Trident-survival-stuff/refs/heads/main/Mine%20speed%20v5", true))()
end)

CombatRight:AddButton("Magic Bullet Redirection", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/V5-paid/refs/heads/main/Magic%20bullet%20redirection", true))()
end)
CombatRight:AddButton("Silent aim", function()
local baseRadius = 200

local fovCircle = Drawing.new("Circle")
fovCircle.Visible = true
fovCircle.Thickness = 1
fovCircle.Color = Color3.fromRGB(255, 255, 255)
fovCircle.Radius = baseRadius
fovCircle.Filled = false

local snapLine = Drawing.new("Line")
snapLine.Visible = false
snapLine.Color = Color3.fromRGB(255, 255, 255)
snapLine.Thickness = 1

local targetCircle = Drawing.new("Circle")
targetCircle.Visible = false
targetCircle.Thickness = 1
targetCircle.Color = Color3.fromRGB(255, 255, 255)
targetCircle.Radius = 2
targetCircle.Filled = false

local CoreGui = game:GetService("CoreGui")
local HL = Instance.new("Highlight")
HL.Name = "Highlight"
HL.Parent = CoreGui
HL.FillTransparency = 1
HL.OutlineColor = Color3.fromRGB(255, 255, 255)

local RunService = game:GetService("RunService")
local Classes = getrenv()._G.classes
local CameraClient = Classes.Camera
local FPSClient = Classes.FPS
local Camera = cloneref(game:GetService("Workspace").CurrentCamera)

local GetFunction = function(Script, Line)
    for _, v in pairs(getgc()) do
        if typeof(v) == "function" and debug.info(v, "sl") then
            local src, lineNum = debug.info(v, "s"), debug.info(v, "l")
            if src:find(Script) and lineNum == Line then
                return v
            end
        end
    end
end

local SetInfraredEnabled = GetFunction("PlayerClient", 588)
local PlayerReg = debug.getupvalue(SetInfraredEnabled, 2)

local validGuns = {
    "AR15", "C9", "Crossbow", "Bow", "EnergyRifle", "GaussRifle",
    "HMAR", "KABAR", "LeverActionRifle", "M4A1", "PipePistol",
    "PipeSMG", "PumpShotgun", "SCAR", "SVD", "USP9", "UZI", "Blunderbuss"
}

function IsValidGun(gun)
    return table.find(validGuns, tostring(gun)) ~= nil
end

function GetClosestTarget(maxDistance)
    local closestTarget, targetVelocity, closestDistance = nil, nil, math.huge
    for i, v in next, PlayerReg do
        if v.type == "Player" and not v.sleeping and v.model:FindFirstChild("HumanoidRootPart") then
            local distanceToPlayer = (v.model.HumanoidRootPart.Position - Camera.CFrame.Position).Magnitude
            local screenPoint = Camera:WorldToViewportPoint(v.model.Head.Position)
            local distanceFromCenter = (Vector2.new(screenPoint.X, screenPoint.Y) - fovCircle.Position).Magnitude
            if distanceToPlayer <= maxDistance and distanceFromCenter <= fovCircle.Radius and distanceToPlayer < closestDistance then
                closestTarget = v.model
                targetVelocity = v.velocityVector
                closestDistance = distanceToPlayer
            end
        end
    end
    return closestTarget, targetVelocity
end

function CalculateBulletDrop(tPos, tVel, cPos, pSpeed, pDrop)
    local dTT = (tPos - cPos).Magnitude
    local tTT = dTT / pSpeed

    local sVE = 8.8 - (pSpeed / (400 + pSpeed / 30))

    local horizontalVel = Vector3.new(tVel.X, 0, tVel.Z) * 7
    local verticalVel = Vector3.new(0, tVel.Y, 0) * 2

    local adjustedVel = horizontalVel + verticalVel

    local pTP = tPos + (adjustedVel * tTT)

    local dP = -pDrop ^ (tTT * pDrop) + 1
    local pPWD = pTP - Vector3.new(0, dP, 0)

    return pPWD
end

local oldGetCFrame = CameraClient.GetCFrame
CameraClient.GetCFrame = function()
    local closest, velocityVector = GetClosestTarget(1000)
    local equippedData = FPSClient.GetEquippedItem()
    if equippedData and closest and closest:FindFirstChild("HumanoidRootPart") and IsValidGun(equippedData.type) then
        local itemClass = Classes[equippedData.type]
        if itemClass then
            local projectileSpeed = itemClass.ProjectileSpeed
            local projectileDrop = itemClass.ProjectileDrop
            
            local predictedPosition , tTT = CalculateBulletDrop(closest.Head.Position, velocityVector, Camera.CFrame.Position, projectileSpeed, projectileDrop)
            return CFrame.new(Camera.CFrame.Position, predictedPosition)
        end
    end
    return oldGetCFrame()
end

RunService.RenderStepped:Connect(function()
    fovCircle.Radius = baseRadius * (math.tan(math.rad(50)) / math.tan(math.rad(Camera.FieldOfView))) ^ 0.35
    fovCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    local closest, _ = GetClosestTarget(1000)
    if closest and closest:FindFirstChild("Head") then
        local headPosition = Camera:WorldToViewportPoint(closest.Head.Position)
        snapLine.From = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
        snapLine.To = Vector2.new(headPosition.X, headPosition.Y)
        snapLine.Visible = true
        targetCircle.Position = Vector2.new(headPosition.X, headPosition.Y)
        targetCircle.Visible = true
        HL.Adornee = closest
    else
        HL.Adornee = nil
        snapLine.Visible = false
        targetCircle.Visible = false
    end
end)
end)
local VisualsLeft = Tabs.Visuals:AddLeftGroupbox("Visuals Left")
local VisualsRight = Tabs.Visuals:AddRightGroupbox("Visuals Right")

VisualsLeft:AddButton("ESP", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/Trident-survival-stuff/refs/heads/main/V5%20esp", true))()
end)

VisualsLeft:AddButton("CrossHair", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/Trident-survival-stuff/refs/heads/main/Cross%20hair", true))()
end)

local WorldLeft = Tabs.World:AddLeftGroupbox("World Left")

local Lighting = game:GetService("Lighting")
local Camera = workspace.CurrentCamera
local DesiredColor = Color3.fromRGB(255,255,255)
local custom_ambient,FovEnabled = false,false
local no_fog,no_shadows,no_colorshift = false,false,false
local SpoofedFov = 120
local ambientFunc = {TimeOfDay=Lighting.TimeOfDay,Ambient=Lighting.Ambient,GlobalShadows=Lighting.GlobalShadows,ColorShift_Top=Lighting.ColorShift_Top,ColorShift_Bottom=Lighting.ColorShift_Bottom,FogEnd=Lighting.FogEnd,FogStart=Lighting.FogStart,FogColor=Lighting.FogColor}
local fovFunc = {FieldOfView=Camera.FieldOfView}

local spoofed_ambient2
spoofed_ambient2 = hookmetamethod(game,"__index",newcclosure(function(self,key)
    if checkcaller() then return spoofed_ambient2(self,key) end
    if self==Lighting and ambientFunc[key]~=nil then return ambientFunc[key] end
    if self==Camera and fovFunc[key] then return fovFunc[key] end
    return spoofed_ambient2(self,key)
end))

local spoofed_ambient1
spoofed_ambient1 = hookmetamethod(game,"__newindex",newcclosure(function(self,key,value)
    if checkcaller() then return spoofed_ambient1(self,key,value) end
    if self==Lighting and ambientFunc[key]~=nil then
        ambientFunc[key]=value
        if key=="Ambient" then return spoofed_ambient1(self,key,custom_ambient and DesiredColor or value)
        elseif key=="GlobalShadows" then return spoofed_ambient1(self,key,no_shadows and false or value)
        elseif key=="ColorShift_Top" or key=="ColorShift_Bottom" then return spoofed_ambient1(self,key,no_colorshift and Color3.new(0,0,0) or value)
        elseif key=="FogStart" or key=="FogEnd" then return spoofed_ambient1(self,key,no_fog and 1e6 or value) end
    end
    if self==Camera and key=="FieldOfView" then
        fovFunc[key]=value
        if FovEnabled then return spoofed_ambient1(self,key,SpoofedFov) end
    end
    return spoofed_ambient1(self,key,value)
end))

WorldLeft:AddToggle("Ambient", {Text="Ambient", Default=false, Callback=function(state) custom_ambient = state end})
WorldLeft:AddToggle("FOV", {Text="FOV", Default=false, Callback=function(state) FovEnabled = state end})

local RandomLeft = Tabs.Random:AddLeftGroupbox("Random")
local Chatspam = false
RandomLeft:AddToggle("Chat Spammer", {Text="Chat Spammer", Default=false, Callback=function(state) Chatspam = state end})

task.spawn(function()
    while true do
        task.wait(12)
        if Chatspam then
            game.TextChatService.TextChannels.RBXGeneral:SendAsync(".gg Q8a9yQb7NY")
        end
    end
end)

loadstring(game:HttpGet("https://raw.githubusercontent.com/milo22-ux/V5-paid/refs/heads/main/Name", true))()
local RunService = game:GetService("RunService")
local watermarkEnabled = true

local watermarkText = Drawing.new("Text")
watermarkText.ZIndex = 2
watermarkText.Transparency = 1
watermarkText.Outline = true
watermarkText.OutlineColor = Color3.new()
watermarkText.Font = Drawing.Fonts.UI
watermarkText.Size = 18

local watermarkBox = Drawing.new("Square")
watermarkBox.ZIndex = 1
watermarkBox.Filled = true
watermarkBox.Color = Color3.new(0, 0, 0)
watermarkBox.Transparency = 0.5

local fpstimer, fps, finalfps = tick(), 0, 60
RunService.RenderStepped:Connect(function()
    fps = fps + 1
    if fpstimer + 1 <= tick() then
        fpstimer = tick()
        finalfps = fps
        fps = 0
    end

    local hue = (tick() % 5) / 5
    watermarkText.Color = Color3.fromHSV(hue, 1, 1)

    watermarkText.Text = ("Vercore.xyz | %s | %s fps"):format(
        os.date("%b %d %Y"),
        tostring(finalfps)
    )

    local pos = Vector2.new(10, 10)
    watermarkText.Position = pos

    watermarkBox.Position = pos - Vector2.new(5, 5)
    watermarkBox.Size = Vector2.new(watermarkText.TextBounds.X + 10, watermarkText.TextBounds.Y + 10)

    watermarkText.Visible = watermarkEnabled
    watermarkBox.Visible = watermarkEnabled
end)
